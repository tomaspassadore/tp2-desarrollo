 create table conserje (
        id bigint generated by default as identity,
        apellido varchar(255),
        contrasenia varchar(255),
        nombre varchar(255),
        usuario varchar(255),
        primary key (id)
    )

    create table factura (
        id bigint generated by default as identity,
        fecha_de_emision timestamp(6),
        importe_total float(53),
        tipo varchar(255) check (tipo in ('A','B')),
        reserva_id bigint,
        primary key (id)
    )

    create table habitacion (
        id bigint generated by default as identity,
        estado smallint check (estado between 0 and 3),
        id_habitacion varchar(255),
        numero varchar(255),
        primary key (id)
    )

    create table item_factura (
        id bigint generated by default as identity,
        iditem_factura varchar(255),
        cantidad integer,
        cantidad_pagada integer,
        descripcion varchar(255),
        precio_unitario float(53),
        factura_id bigint not null,
        primary key (id)
    )

    create table nota_de_credito (
        id bigint generated by default as identity,
        idnota varchar(255),
        fecha_realizacion timestamp(6),
        monto float(53),
        primary key (id)
    )

    create table pago (
        id bigint generated by default as identity,
        fecha_de_realizacion timestamp(6),
        monto_acumulado float(53),
        vuelto float(53),
        primary key (id)
    )

    create table pasajero (
        id bigint generated by default as identity,
        cuit varchar(255),
        apellido varchar(255),
        email varchar(255),
        fecha_de_nacimiento timestamp(6),
        nacionalidad varchar(255),
        nombre varchar(255),
        nro_documento varchar(255),
        ocupacion varchar(255),
        telefono varchar(255),
        primary key (id)
    )

    create table reserva (
        id bigint generated by default as identity,
        fecha_egreso timestamp(6),
        fecha_ingreso timestamp(6),
        habitacion_id bigint not null,
        responsable_id bigint,
        primary key (id)
    )

    create table reserva_pasajero (
        reserva_id bigint not null,
        pasajero_id bigint not null,
        primary key (reserva_id, pasajero_id)
    )

    create table responsable_reserva (
        id bigint generated by default as identity,
        apellido varchar(255),
        nombre varchar(255),
        telefono varchar(255),
        primary key (id)
    )

    alter table if exists factura
       drop constraint if exists UKcjta8y75mvhbfuj28ljl4ml3a

    alter table if exists factura
       add constraint UKcjta8y75mvhbfuj28ljl4ml3a unique (reserva_id)

    alter table if exists item_factura
       drop constraint if exists UK6n25qfel8sxei0nbrgrhgvymp

    alter table if exists item_factura
       add constraint UK6n25qfel8sxei0nbrgrhgvymp unique (iditem_factura)

    alter table if exists nota_de_credito
       drop constraint if exists UK8l4xisnvb3xjg4k2jf3g2keqc

    alter table if exists nota_de_credito
       add constraint UK8l4xisnvb3xjg4k2jf3g2keqc unique (idnota)

    alter table if exists reserva
       drop constraint if exists UKdx6a0ebuc7slt3js2iscpte7e

    alter table if exists reserva
       add constraint UKdx6a0ebuc7slt3js2iscpte7e unique (responsable_id)

    alter table if exists factura
       add constraint FKg69rrgpy99eypr8n2sdv1ln7r
       foreign key (reserva_id)
       references reserva

    alter table if exists item_factura
       add constraint FKkfblphnv8cfyocr7pvaf613v7
       foreign key (factura_id)
       references factura

    alter table if exists reserva
       foreign key (factura_id)
       references factura

    alter table if exists reserva
       add constraint FKtr5bg864m3dseko7gif2bl239
       foreign key (habitacion_id)
       references habitacion

    alter table if exists reserva
       add constraint FK1qyy7s04onv0o6petkitcgedp
       foreign key (responsable_id)
       references responsable_reserva

    alter table if exists reserva_pasajero
       add constraint FKtec29t14ui2uycfg6y18jqb7q
       foreign key (pasajero_id)
       references pasajero

    alter table if exists reserva_pasajero
       add constraint FKgr34vojido14g3ccjxo7yebt4
       foreign key (reserva_id)
       references reserva
